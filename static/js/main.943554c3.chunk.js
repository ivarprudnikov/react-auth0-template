(this["webpackJsonptest-auth0-react-login"]=this["webpackJsonptest-auth0-react-login"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"name":"test-auth0-react-login","version":"0.1.0","homepage":"https://ivarprudnikov.github.io/react-auth0-template","private":false,"dependencies":{"@auth0/auth0-spa-js":"^1.6.0","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","jwt-decode":"^2.2.0","react":"^16.12.0","react-dom":"^16.12.0","react-router-dom":"^5.1.2","react-scripts":"3.3.0"},"scripts":{"start":"REACT_APP_VERSION=$(date \\"+%Y-%m-%d %H:%M\\") react-scripts start","build":"REACT_APP_VERSION=$(date \\"+%Y-%m-%d %H:%M\\") react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},24:function(e,t,n){e.exports=n(40)},29:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=(n(29),n(2)),l=n.n(i),s=n(10),u=n(19),p=n.n(u),d=n(20),m=n.n(d),f=n(13),h={domain:"ivarprudnikov.eu.auth0.com",clientId:"EuHrJlslqdI6h5UOuAMtau6maPa05lRd",scope:"openid profile email",loginCallbackUrl:f.homepage,logoutRedirectUrl:f.homepage},g=function(){return window.history.replaceState({},document.title,window.location.pathname)},b=r.a.createContext({}),w=function(){return Object(a.useContext)(b)},v=n(8),E=function(){var e=w(),t=e.isAuthenticated,n=e.loginWithRedirect,a=e.logoutWithRedirect;return r.a.createElement("div",null,!t&&r.a.createElement("button",{onClick:function(){return n({})}},"Log in"),t&&r.a.createElement("button",{onClick:function(){return a()}},"Log out"),t&&r.a.createElement("span",null,r.a.createElement(v.a,{to:"/"},"Home"),"\xa0",r.a.createElement(v.a,{to:"/profile"},"Profile")))},x=n(7),k=function(){var e=w(),t=e.loading,n=e.user;return t||!n?r.a.createElement("div",null,"Loading..."):r.a.createElement(a.Fragment,null,r.a.createElement("img",{src:n.picture,alt:"Profile"}),r.a.createElement("h2",null,n.name),r.a.createElement("p",null,n.email),r.a.createElement("code",null,JSON.stringify(n,null,2)))},y=n(3),O=Object(y.a)(),R=n(23),j=function(e){var t=e.component,n=e.path,c=Object(R.a)(e,["component","path"]),o=w(),i=o.loading,s=o.isAuthenticated,u=o.loginWithRedirect;Object(a.useEffect)((function(){if(!i&&!s){l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(u({appState:{targetUrl:n}}));case 2:case"end":return e.stop()}}))}}),[i,s,u,n]);return r.a.createElement(x.a,Object.assign({path:n,render:function(e){return!0===s?r.a.createElement(t,e):null}},c))};var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(x.b,{history:O},r.a.createElement("header",null,r.a.createElement(E,null)),r.a.createElement(x.c,null,r.a.createElement(x.a,{path:"/",exact:!0}),r.a.createElement(j,{path:"/profile",component:k})),r.a.createElement("footer",null,r.a.createElement("small",null,"Version: ",window.REACT_APP_VERSION))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(e){var t=e.children,n=e.onRedirectCallback,c=Object(a.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],d=Object(a.useState)(null),f=Object(s.a)(d,2),w=f[0],v=f[1],E=Object(a.useState)(null),x=Object(s.a)(E,2),k=x[0],y=x[1],O=Object(a.useState)(!0),R=Object(s.a)(O,2),j=R[0],C=R[1];"function"!==typeof n&&(n=g),Object(a.useEffect)((function(){(function(){var e,t,a,r,c;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,l.a.awrap(m()({domain:h.domain,client_id:h.clientId,scope:h.scope,redirect_uri:h.loginCallbackUrl}));case 2:if(e=o.sent,y(e),!window.location.search.includes("code=")){o.next=10;break}return o.next=7,l.a.awrap(e.handleRedirectCallback());case 7:t=o.sent,a=t.appState,n(a);case 10:return o.next=12,l.a.awrap(e.isAuthenticated());case 12:if(r=o.sent,u(r),!r){o.next=19;break}return o.next=17,l.a.awrap(e.getUser());case 17:c=o.sent,v(c);case 19:C(!1);case 20:case"end":return o.stop()}}))})().catch((function(e){console.error("initAuth0 failure",e),window.location.replace("/")}))}),[n]);var A=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(k.getTokenSilently());case 2:return e=t.sent,t.abrupt("return",{raw:e,decoded:p()(e)});case 4:case"end":return t.stop()}}))};return r.a.createElement(b.Provider,{value:{isAuthenticated:i,user:w,loading:j,handleRedirectCallback:function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),t.next=3,l.a.awrap(k.handleRedirectCallback());case 3:return t.next=5,l.a.awrap(k.getUser());case 5:e=t.sent,C(!1),u(!0),v(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return k.getIdTokenClaims.apply(k,arguments)},loginWithRedirect:function(){return k.loginWithRedirect.apply(k,arguments)},getTokenSilently:A,hasAnyScopeAsync:function(e){var t,n;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(A());case 2:return t=a.sent,n=(t.decoded.scope||"").split(/\W/),a.abrupt("return",e&&e.length&&e.some((function(e){return n.indexOf(e)>-1})));case 5:case"end":return a.stop()}}))},getTokenWithPopup:function(){return k.getTokenWithPopup.apply(k,arguments)},logoutWithRedirect:function(){return k.logout({returnTo:h.logoutRedirectUrl})}}},t)}),{onRedirectCallback:function(e){O.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.943554c3.chunk.js.map