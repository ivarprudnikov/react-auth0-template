(this["webpackJsonptest-auth0-react-login"]=this["webpackJsonptest-auth0-react-login"]||[]).push([[0],{14:function(e){e.exports=JSON.parse('{"name":"test-auth0-react-login","version":"0.1.0","homepage":"https://ivarprudnikov.github.io/react-auth0-template","private":false,"dependencies":{"@auth0/auth0-spa-js":"^1.6.4","@testing-library/jest-dom":"^5.1.1","@testing-library/react":"^9.4.0","@testing-library/user-event":"^8.1.0","bootstrap":"^4.4.1","jwt-decode":"^2.2.0","node-sass":"^4.13.1","react":"^16.12.0","react-dom":"^16.12.0","react-router-dom":"^5.1.2","react-scripts":"3.3.1"},"scripts":{"start":"REACT_APP_VERSION=$(date \\"+%Y-%m-%d %H:%M\\") react-scripts start","build":"REACT_APP_VERSION=$(date \\"+%Y-%m-%d %H:%M\\") react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},25:function(e,t,a){e.exports=a(41)},30:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),l=(a(30),a(4)),o=a.n(l),s=a(8),u=a(11),m=a(20),p=a.n(m),d=a(21),h=a.n(d),f=a(14),b={domain:"ivarprudnikov.eu.auth0.com",clientId:"EuHrJlslqdI6h5UOuAMtau6maPa05lRd",scope:"openid profile email",loginCallbackUrl:f.homepage,logoutRedirectUrl:f.homepage},v=function(){return window.history.replaceState({},document.title,window.location.pathname)},g=r.a.createContext({}),E=function(){return Object(n.useContext)(g)},w=a(6),N=function(){var e=E(),t=e.isAuthenticated,a=e.loginWithRedirect,n=e.logoutWithRedirect;return r.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-light"},r.a.createElement("div",{className:"container"},r.a.createElement(w.a,{className:"navbar-brand",to:"/react-auth0-template/"},"Brnd"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item-divider"})),!t&&r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){return a({})}},"Log in"))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(w.a,{className:"nav-link",to:"/react-auth0-template/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(w.a,{className:"nav-link",to:"/react-auth0-template/profile"},"Profile"))),r.a.createElement("form",{className:"form-inline ml-4"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){return n()}},"Log out")))))},k=a(7),x=function(){var e=E(),t=e.loading,a=e.user;return t||!a?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement("img",{src:a.picture,alt:"Profile",className:"img-fluid"})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,a.email)),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("code",{className:"p-3 bg-dark text-light d-block"},JSON.stringify(a,null,2)))))},y=a(2),j=Object(y.a)(),O=a(24),R=function(e){var t=e.component,a=e.path,c=Object(O.a)(e,["component","path"]),i=E(),l=i.loading,u=i.isAuthenticated,m=i.loginWithRedirect;Object(n.useEffect)((function(){l||u||function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({appState:{targetUrl:a}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,u,m,a]);return r.a.createElement(k.a,Object.assign({path:a,render:function(e){return!0===u?r.a.createElement(t,e):null}},c))},C=function(){return r.a.createElement("div",{className:"container text-center"},r.a.createElement("h1",{className:"display-1"},"Super fancy app"),r.a.createElement("div",{className:"mt-5"},r.a.createElement(w.a,{className:"btn btn-lg btn-primary mr-2",to:"/react-auth0-template/profile"},"Protected profile page")))};var S=function(){return r.a.createElement("div",{className:"d-flex min-vh-100 flex-column justify-content-between"},r.a.createElement(k.b,{history:j},r.a.createElement("header",null,r.a.createElement(N,null)),r.a.createElement("main",null,r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/react-auth0-template/",exact:!0,component:C}),r.a.createElement(R,{path:"/react-auth0-template/profile",component:x}))),r.a.createElement("footer",{className:"p-4 text-center bg-primary text-light"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("small",null,"Version: ",window.REACT_APP_VERSION),r.a.createElement("span",{className:"mx-auto"}),r.a.createElement("a",{href:"https://github.com/ivarprudnikov/react-auth0-template",className:"btn btn-sm btn-outline-light mr-3"},"Source code on Github"),r.a.createElement("a",{href:"https://www.ivarprudnikov.com/auth0-authentication-website-react/",className:"btn btn-sm btn-outline-light"},"About this implementation"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=Object(n.useState)(!1),i=Object(u.a)(c,2),l=i[0],m=i[1],d=Object(n.useState)(null),f=Object(u.a)(d,2),E=f[0],w=f[1],N=Object(n.useState)(null),k=Object(u.a)(N,2),x=k[0],y=k[1],j=Object(n.useState)(!0),O=Object(u.a)(j,2),R=O[0],C=O[1];"function"!==typeof a&&(a=v),Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()({domain:b.domain,client_id:b.clientId,scope:b.scope,redirect_uri:b.loginCallbackUrl});case 2:if(t=e.sent,y(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,r=n.appState,a(r);case 10:return e.next=12,t.isAuthenticated();case 12:if(c=e.sent,m(c),!c){e.next=19;break}return e.next=17,t.getUser();case 17:i=e.sent,w(i);case 19:C(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){console.error("initAuth0 failure",e),window.location.replace("/")}))}),[a]);var S=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,x.handleRedirectCallback();case 3:return e.next=5,x.getUser();case 5:t=e.sent,C(!1),m(!0),w(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getTokenSilently();case 2:return t=e.sent,e.abrupt("return",{raw:t,decoded:p()(t)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(s.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return a=e.sent,n=(a.decoded.scope||"").split(/\W/),e.abrupt("return",t&&t.length&&t.some((function(e){return n.indexOf(e)>-1})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(g.Provider,{value:{isAuthenticated:l,user:E,loading:R,handleRedirectCallback:S,getIdTokenClaims:function(){return x.getIdTokenClaims.apply(x,arguments)},loginWithRedirect:function(){return x.loginWithRedirect.apply(x,arguments)},getTokenSilently:A,hasAnyScopeAsync:P,getTokenWithPopup:function(){return x.getTokenWithPopup.apply(x,arguments)},logoutWithRedirect:function(){return x.logout({returnTo:b.logoutRedirectUrl})}}},t)}),{onRedirectCallback:function(e){j.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.cbd21fcd.chunk.js.map