(this["webpackJsonptest-auth0-react-login"]=this["webpackJsonptest-auth0-react-login"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"name":"test-auth0-react-login","version":"0.1.0","homepage":"https://ivarprudnikov.github.io/react-auth0-template","private":false,"dependencies":{"@auth0/auth0-spa-js":"^1.6.0","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","bootstrap":"^4.4.1","jwt-decode":"^2.2.0","node-sass":"^4.13.0","react":"^16.12.0","react-dom":"^16.12.0","react-router-dom":"^5.1.2","react-scripts":"3.3.0"},"scripts":{"start":"REACT_APP_VERSION=$(date \\"+%Y-%m-%d %H:%M\\") react-scripts start","build":"REACT_APP_VERSION=$(date \\"+%Y-%m-%d %H:%M\\") react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},24:function(e,t,a){e.exports=a(40)},29:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),i=(a(29),a(2)),o=a.n(i),s=a(10),u=a(19),m=a.n(u),p=a(20),d=a.n(p),h=a(13),f={domain:"ivarprudnikov.eu.auth0.com",clientId:"EuHrJlslqdI6h5UOuAMtau6maPa05lRd",scope:"openid profile email",loginCallbackUrl:h.homepage,logoutRedirectUrl:h.homepage},b=function(){return window.history.replaceState({},document.title,window.location.pathname)},v=r.a.createContext({}),g=function(){return Object(n.useContext)(v)},E=a(7),w=function(){var e=g(),t=e.isAuthenticated,a=e.loginWithRedirect,n=e.logoutWithRedirect;return r.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-light"},r.a.createElement("div",{className:"container"},r.a.createElement(E.a,{className:"navbar-brand",to:"/react-auth0-template/"},"Brnd"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item-divider"})),!t&&r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){return a({})}},"Log in"))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{className:"nav-link",to:"/react-auth0-template/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{className:"nav-link",to:"/react-auth0-template/profile"},"Profile"))),r.a.createElement("form",{className:"form-inline ml-4"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){return n()}},"Log out")))))},N=a(8),x=function(){var e=g(),t=e.loading,a=e.user;return t||!a?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement("img",{src:a.picture,alt:"Profile",className:"img-fluid"})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,a.email)),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("code",{className:"p-3 bg-dark text-light d-block"},JSON.stringify(a,null,2)))))},y=a(3),k=Object(y.a)(),j=a(23),O=function(e){var t=e.component,a=e.path,c=Object(j.a)(e,["component","path"]),l=g(),i=l.loading,s=l.isAuthenticated,u=l.loginWithRedirect;Object(n.useEffect)((function(){if(!i&&!s){o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(u({appState:{targetUrl:a}}));case 2:case"end":return e.stop()}}))}}),[i,s,u,a]);return r.a.createElement(N.a,Object.assign({path:a,render:function(e){return!0===s?r.a.createElement(t,e):null}},c))},R=function(){return r.a.createElement("div",{className:"container text-center"},r.a.createElement("h1",{className:"display-1"},"Super fancy app"),r.a.createElement("div",{className:"mt-5"},r.a.createElement(E.a,{className:"btn btn-lg btn-primary mr-2",to:"/react-auth0-template/profile"},"Protected profile page")))};var C=function(){return r.a.createElement("div",{className:"d-flex min-vh-100 flex-column justify-content-between"},r.a.createElement(N.b,{history:k},r.a.createElement("header",null,r.a.createElement(w,null)),r.a.createElement("main",null,r.a.createElement(N.c,null,r.a.createElement(N.a,{path:"/react-auth0-template/",exact:!0,component:R}),r.a.createElement(O,{path:"/react-auth0-template/profile",component:x}))),r.a.createElement("footer",{className:"p-4 text-center bg-primary text-light"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("small",null,"Version: ",window.REACT_APP_VERSION),r.a.createElement("span",{className:"mx-auto"}),r.a.createElement("a",{href:"https://github.com/ivarprudnikov/react-auth0-template",className:"btn btn-sm btn-outline-light mr-3"},"Source code on Github"),r.a.createElement("a",{href:"https://www.ivarprudnikov.com/auth0-authentication-website-react/",className:"btn btn-sm btn-outline-light"},"About this implementation"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=Object(n.useState)(!1),l=Object(s.a)(c,2),i=l[0],u=l[1],p=Object(n.useState)(null),h=Object(s.a)(p,2),g=h[0],E=h[1],w=Object(n.useState)(null),N=Object(s.a)(w,2),x=N[0],y=N[1],k=Object(n.useState)(!0),j=Object(s.a)(k,2),O=j[0],R=j[1];"function"!==typeof a&&(a=b),Object(n.useEffect)((function(){(function(){var e,t,n,r,c;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,o.a.awrap(d()({domain:f.domain,client_id:f.clientId,scope:f.scope,redirect_uri:f.loginCallbackUrl}));case 2:if(e=l.sent,y(e),!window.location.search.includes("code=")){l.next=10;break}return l.next=7,o.a.awrap(e.handleRedirectCallback());case 7:t=l.sent,n=t.appState,a(n);case 10:return l.next=12,o.a.awrap(e.isAuthenticated());case 12:if(r=l.sent,u(r),!r){l.next=19;break}return l.next=17,o.a.awrap(e.getUser());case 17:c=l.sent,E(c);case 19:R(!1);case 20:case"end":return l.stop()}}))})().catch((function(e){console.error("initAuth0 failure",e),window.location.replace("/")}))}),[a]);var C=function(){var e;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.awrap(x.getTokenSilently());case 2:return e=t.sent,t.abrupt("return",{raw:e,decoded:m()(e)});case 4:case"end":return t.stop()}}))};return r.a.createElement(v.Provider,{value:{isAuthenticated:i,user:g,loading:O,handleRedirectCallback:function(){var e;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return R(!0),t.next=3,o.a.awrap(x.handleRedirectCallback());case 3:return t.next=5,o.a.awrap(x.getUser());case 5:e=t.sent,R(!1),u(!0),E(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return x.getIdTokenClaims.apply(x,arguments)},loginWithRedirect:function(){return x.loginWithRedirect.apply(x,arguments)},getTokenSilently:C,hasAnyScopeAsync:function(e){var t,a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(C());case 2:return t=n.sent,a=(t.decoded.scope||"").split(/\W/),n.abrupt("return",e&&e.length&&e.some((function(e){return a.indexOf(e)>-1})));case 5:case"end":return n.stop()}}))},getTokenWithPopup:function(){return x.getTokenWithPopup.apply(x,arguments)},logoutWithRedirect:function(){return x.logout({returnTo:f.logoutRedirectUrl})}}},t)}),{onRedirectCallback:function(e){k.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.d1725da2.chunk.js.map