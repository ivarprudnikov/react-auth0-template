{"version":3,"sources":["App.js","auth_config.js","react-auth0-spa.js","components/NavBar.js","components/Profile.js","utils/history.js","components/PrivateRoute.js","components/Home.js","serviceWorker.js","index.js"],"names":["axiosRequestInterceptorSetup","axiosResponseInterceptorSetup","domain","clientId","audience","scope","loginCallbackUrl","packageJson","homepage","logoutRedirectUrl","DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","title","location","pathname","Auth0Context","React","createContext","useAuth0","useContext","NavBar","isAuthenticated","loginWithRedirect","logoutWithRedirect","className","to","process","type","onClick","Profile","loading","user","useState","apiUser","setApiUser","useEffect","axios","get","then","response","data","catch","aria-label","src","picture","alt","name","email","JSON","stringify","createBrowserHistory","PrivateRoute","Component","component","path","rest","a","appState","targetUrl","fn","render","props","Home","bufferOf401PromiseResolvers","bufferOf403PromiseResolvers","App","defaults","baseURL","getTokenSilently","dialog401Open","setDialog401Open","dialog403Open","setDialog403Open","dialogServerErrorOpen","setDialogServerErrorOpen","ERROR","closeDialog","errorType","length","shift","call","interceptors","request","eject","use","config","console","log","token","headers","Authorization","raw","err","resp","error","status","Promise","resolve","push","reject","apiErrorsIfAny","api401ErrorIfAny","api403ErrorIfAny","apiServerErrorIfAny","aria-hidden","exact","REACT_APP_VERSION","href","Boolean","hostname","match","ReactDOM","children","onRedirectCallback","setIsAuthenticated","setUser","auth0Client","setAuth0","setLoading","createAuth0Client","client_id","redirect_uri","auth0FromHook","search","includes","handleRedirectCallback","getUser","initAuth0","e","replace","accessToken","Error","decoded","jwt_decode","getTokenScopesAsync","scopeString","split","hasAnyScopeAsync","scopes","tokenScopes","some","s","indexOf","Provider","value","getIdTokenClaims","getTokenWithPopup","logout","returnTo","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d771d20b.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport NavBar from \"./components/NavBar\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport axios from 'axios';\nimport Profile from \"./components/Profile\";\nimport history from \"./utils/history\";\nimport PrivateRoute from \"./components/PrivateRoute\";\nimport Home from './components/Home';\nimport { useAuth0 } from './react-auth0-spa';\n\nlet axiosRequestInterceptorSetup;\nlet axiosResponseInterceptorSetup;\nlet bufferOf401PromiseResolvers = [];\nlet bufferOf403PromiseResolvers = [];\n\nfunction App() {\n\n  axios.defaults.baseURL = process.env.REACT_APP_SERVER;\n\n  const { loading, getTokenSilently } = useAuth0();\n\n  const [dialog401Open, setDialog401Open] = useState(false);\n  const [dialog403Open, setDialog403Open] = useState(false);\n  const [dialogServerErrorOpen, setDialogServerErrorOpen] = useState(false);\n\n  const ERROR = {\n    unauthorized: 401,\n    forbidden: 403,\n    serverError: 500\n  };\n\n  /**\n   * Can be used only after Auth0Client is ready!\n   * @param config\n   * @return {Q.Promise<any> | Promise<any>}\n   */\n  function axiosRequestInterceptor (config) {\n    console.log('axiosRequestInterceptor')\n    return getTokenSilently()\n      .then((token) => {\n        console.log('axiosRequestInterceptor token', token)\n        config.headers = config.headers || {};\n        config.headers.Authorization = `Bearer ${token.raw}`;\n        return config;\n      })\n      .catch((err) => {\n        console.log('axiosRequestInterceptor catch', err)\n        return config;\n      });\n  }\n\n  /**\n   * Can be used only after Auth0Client is ready!\n   * @param error\n   * @return {Q.Promise<any> | Promise<any>}\n   */\n  function axiosResponseFailureInterceptor (error) {\n    console.log(error)\n    if (error && error.response) {\n      switch (error.response.status) {\n        case ERROR.unauthorized:\n          return new Promise(resolve => {\n            bufferOf401PromiseResolvers.push(resolve);\n            setDialog401Open(true);\n          }).then(() => Promise.reject(error));\n        case ERROR.forbidden:\n          return new Promise(resolve => {\n            bufferOf403PromiseResolvers.push(resolve);\n            setDialog403Open(true);\n          }).then(() => Promise.reject(error));\n        default:\n          if (error.response.status >= ERROR.serverError){\n            setDialogServerErrorOpen(true);\n          }\n          return Promise.reject(error);\n      }\n    } else {\n      // Necessary to show errors without status codes like \"Network Error\"\n      setDialogServerErrorOpen(true);\n    }\n\n    return Promise.reject(error);\n  }\n\n  function closeDialog (errorType) {\n    switch (errorType) {\n      case ERROR.unauthorized:\n        while (bufferOf401PromiseResolvers.length > 0) {\n          bufferOf401PromiseResolvers.shift().call();\n        }\n        setDialog401Open(false);\n        break;\n      case ERROR.forbidden:\n        while (bufferOf403PromiseResolvers.length > 0) {\n          bufferOf403PromiseResolvers.shift().call();\n        }\n        setDialog403Open(false);\n        break;\n      default:\n        setDialog401Open(false);\n        setDialog403Open(false);\n        setDialogServerErrorOpen(false);\n    }\n  }\n\n  if (axiosRequestInterceptorSetup != null) {\n    axios.interceptors.request.eject(axiosRequestInterceptorSetup);\n  }\n\n  if (axiosResponseInterceptorSetup != null) {\n    axios.interceptors.response.eject(axiosResponseInterceptorSetup);\n  }\n\n  if (!loading) {\n    axiosRequestInterceptorSetup = axios.interceptors.request.use(axiosRequestInterceptor);\n    axiosResponseInterceptorSetup = axios.interceptors.response.use((resp) => resp, axiosResponseFailureInterceptor);\n  }\n\n  let apiErrorsIfAny = null;\n  let api401ErrorIfAny = null;\n  let api403ErrorIfAny = null;\n  let apiServerErrorIfAny = null;\n\n  if (dialog401Open) api401ErrorIfAny = (<div className=\"container\">\n    <div className=\"alert alert-danger mb-2\">Authentication is required\n      <button type=\"button\" onClick={() => closeDialog(ERROR.unauthorized)} className=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n    </div>\n  </div>);\n\n  if (dialog403Open) api403ErrorIfAny = (<div className=\"container\">\n    <div className=\"alert alert-danger mb-2\">You're not authorized to perform an action.\n      <button type=\"button\" onClick={() => closeDialog(ERROR.forbidden)} className=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n    </div>\n  </div>);\n\n  if (dialogServerErrorOpen) apiServerErrorIfAny = (<div className=\"container\">\n    <div className=\"alert alert-danger mb-2\">Server responded with an unexpected error.\n      <button type=\"button\" onClick={() => closeDialog(ERROR.serverError)} className=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n    </div>\n  </div>);\n\n  if (api401ErrorIfAny || api403ErrorIfAny || apiServerErrorIfAny) {\n    apiErrorsIfAny = (<div className=\"bg-dark p-3\">\n      {api401ErrorIfAny}\n      {api403ErrorIfAny}\n      {apiServerErrorIfAny}\n    </div>);\n  }\n\n  return (\n    <div className=\"d-flex min-vh-100 flex-column\">\n      {apiErrorsIfAny}\n      <Router history={history}>\n        <header>\n          <NavBar />\n        </header>\n        <main>\n          { loading && <div className=\"d-flex align-items-center justify-content-center my-auto\">\n            <span className=\"spinner-border\" aria-label=\"Loading ...\" />\n          </div> }\n          { !loading && <Switch>\n            <Route path={process.env.PUBLIC_URL + \"/\"} exact component={Home}/>\n            <PrivateRoute path={process.env.PUBLIC_URL + \"/profile\"} component={Profile} />\n          </Switch> }\n        </main>\n        <footer className=\"p-4 text-center bg-primary text-light mt-auto\">\n          <div className=\"container\">\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <small>Version: {window.REACT_APP_VERSION}</small>\n              <span className=\"mx-auto\"></span>\n              <a href=\"https://github.com/ivarprudnikov/react-auth0-template\" className=\"btn btn-sm btn-outline-light mr-3\">Source code on Github</a>\n              <a href=\"https://www.ivarprudnikov.com/auth0-authentication-website-react/\" className=\"btn btn-sm btn-outline-light\">About this implementation</a>\n            </div>\n          </div>\n        </footer>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import packageJson from '../package.json';\n\nexport default {\n  domain: \"ivarprudnikov.eu.auth0.com\",\n  clientId: \"EuHrJlslqdI6h5UOuAMtau6maPa05lRd\",\n  audience: \"https://ivarprudnikov.com\",\n  scope: \"openid profile email\",\n  loginCallbackUrl: process.env.NODE_ENV === 'production' ? packageJson.homepage : window.location.origin,\n  logoutRedirectUrl: process.env.NODE_ENV === 'production' ? packageJson.homepage : window.location.origin\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport jwt_decode from 'jwt-decode';\nimport createAuth0Client from '@auth0/auth0-spa-js';\nimport config from './auth_config';\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname);\n\nexport const Auth0Context = React.createContext({});\nexport const useAuth0 = () => useContext(Auth0Context);\nexport const Auth0Provider = ({\n  children,\n  onRedirectCallback\n}) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [auth0Client, setAuth0] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  if (typeof onRedirectCallback !== 'function') {\n    onRedirectCallback = DEFAULT_REDIRECT_CALLBACK;\n  }\n\n  /**\n   * Should run only once as options do not change\n   */\n  useEffect(() => {\n    const initAuth0 = async () => {\n\n      const auth0FromHook = await createAuth0Client({\n        domain: config.domain,\n        client_id: config.clientId,\n        audience: config.audience,\n        scope: config.scope,\n        redirect_uri: config.loginCallbackUrl\n      });\n      setAuth0(auth0FromHook);\n\n      if (window.location.search.includes('code=')) {\n        const { appState } = await auth0FromHook.handleRedirectCallback();\n        onRedirectCallback(appState);\n      }\n\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\n\n      setIsAuthenticated(isAuthenticated);\n\n      if (isAuthenticated) {\n        const user = await auth0FromHook.getUser();\n        setUser(user);\n      }\n\n      setLoading(false);\n    };\n\n    initAuth0()\n      .catch((e) => {\n        console.error('initAuth0 failure', e);\n        window.location.replace('/');\n      });\n\n  }, [onRedirectCallback]);\n\n  const handleRedirectCallback = async () => {\n    setLoading(true);\n    await auth0Client.handleRedirectCallback();\n    const user = await auth0Client.getUser();\n    setLoading(false);\n    setIsAuthenticated(true);\n    setUser(user);\n  };\n\n  const getTokenSilently = async () => {\n    let accessToken;\n    try {\n      accessToken = await auth0Client.getTokenSilently();\n    } catch (e) {\n      console.log(e);\n      throw new Error(\"Could not obtain access token\");\n    }\n    try {\n      return { raw: accessToken, decoded: jwt_decode(accessToken) };\n    } catch (e) {\n      console.log(e);\n      throw new Error(\"Could not decode access token\");\n    }\n  };\n\n  const getTokenScopesAsync = async () => {\n    let token;\n    try {\n      token = await getTokenSilently();\n    } catch (e) {\n      return [];\n    }\n    const scopeString = (token.decoded.scope || '') + '';\n    return scopeString.split(/\\W/);\n  };\n\n  const hasAnyScopeAsync = async (scopes) => {\n    const tokenScopes = await getTokenScopesAsync();\n    return scopes && scopes.length && scopes.some(s => tokenScopes.indexOf(s) > -1);\n  };\n\n  const logoutWithRedirect = () => auth0Client.logout({\n    returnTo: config.logoutRedirectUrl\n  });\n\n  return (\n    <Auth0Context.Provider\n      value={{\n        isAuthenticated,\n        user,\n        loading,\n        handleRedirectCallback,\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n        getTokenSilently,\n        hasAnyScopeAsync,\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\n        logoutWithRedirect\n      }}\n    >\n      {children}\n    </Auth0Context.Provider>\n  );\n};\n","import React from \"react\";\nimport { useAuth0 } from \"../react-auth0-spa\";\nimport { Link } from \"react-router-dom\";\n\nconst NavBar = () => {\n  const { isAuthenticated, loginWithRedirect, logoutWithRedirect } = useAuth0();\n\n  return (<nav className=\"navbar navbar-expand navbar-light bg-light\">\n    <div className=\"container\">\n      <Link className=\"navbar-brand\" to={process.env.PUBLIC_URL + \"/\"}>\n        Brnd\n      </Link>\n      <ul className=\"navbar-nav mr-auto\">\n        <li className=\"nav-item-divider\"/>\n      </ul>\n      {!isAuthenticated && (<ul className=\"navbar-nav\">\n        <form className=\"form-inline\">\n          <button className=\"btn btn-outline-primary\"\n                  type=\"button\"\n                  onClick={() => loginWithRedirect({})}>\n            Log in\n          </button>\n        </form>\n      </ul>)}\n      {isAuthenticated && (<>\n        <ul className=\"navbar-nav\">\n          <li className=\"nav-item\">\n            <Link className=\"nav-link\" to={process.env.PUBLIC_URL + \"/\"}>Home</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link className=\"nav-link\" to={process.env.PUBLIC_URL + \"/profile\"}>Profile</Link>\n          </li>\n        </ul>\n        <form className=\"form-inline ml-4\">\n          <button className=\"btn btn-outline-secondary\"\n                  type=\"button\"\n                  onClick={() => logoutWithRedirect()}>\n            Log out\n          </button>\n        </form>\n      </>)}\n    </div>\n  </nav>);\n\n};\n\nexport default NavBar;\n","import React, { useEffect, useState } from 'react';\nimport { useAuth0 } from \"../react-auth0-spa\";\nimport axios from 'axios';\n\nconst Profile = () => {\n  const { loading, user } = useAuth0();\n  const [apiUser, setApiUser] = useState({});\n\n  useEffect(() => {\n    if (!loading && user) {\n      axios.get('/me')\n        .then(response => setApiUser(response.data))\n        .catch(() => {\n          setApiUser({});\n        });\n    }\n  }, [loading, user]);\n\n  if (loading || !user) {\n    return <div className=\"d-flex min-vh-100 align-items-center justify-content-center\">\n      <span className=\"spinner-border\" aria-label=\"Loading ...\" />\n    </div>;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-2\">\n          <img src={user.picture} alt=\"Profile\" className=\"img-fluid\" />\n        </div>\n        <div className=\"col-sm-4\">\n          <h2>{user.name}</h2>\n          <p>{user.email}</p>\n        </div>\n        <div className=\"col-sm-6\">\n          <code className=\"p-3 bg-dark text-light d-block mb-3\">{JSON.stringify(user, null, 2)}</code>\n          <pre className=\"p-3 bg-dark text-light d-block\">{JSON.stringify(apiUser, null, 2)}</pre>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n","import { createBrowserHistory } from \"history\";\nexport default createBrowserHistory();\n","import React, { useEffect } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useAuth0 } from \"../react-auth0-spa\";\n\nconst PrivateRoute = ({ component: Component, path, ...rest }) => {\n  const { loading, isAuthenticated, loginWithRedirect } = useAuth0();\n\n  useEffect(() => {\n    if (loading || isAuthenticated) {\n      return;\n    }\n    const fn = async () => {\n      await loginWithRedirect({\n        appState: { targetUrl: path }\n      });\n    };\n    fn();\n  }, [loading, isAuthenticated, loginWithRedirect, path]);\n\n  const render = props =>\n    isAuthenticated === true ? <Component {...props} /> : null;\n\n  return <Route path={path} render={render} {...rest} />;\n};\n\nexport default PrivateRoute;\n","import React from \"react\";\nimport { Link } from 'react-router-dom';\n\nconst Home = () => {\n  return (\n    <div className=\"container text-center\">\n      <h1 className=\"display-1\">Super fancy app</h1>\n      <div className=\"mt-5\">\n        <Link className=\"btn btn-lg btn-primary mr-2\" to={process.env.PUBLIC_URL + \"/profile\"}>Protected profile page</Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Auth0Provider } from \"./react-auth0-spa\";\nimport history from \"./utils/history\";\n\n// A function that routes the user to the right place\n// after login\nconst onRedirectCallback = appState => {\n  history.push(\n    appState && appState.targetUrl\n      ? appState.targetUrl\n      : window.location.pathname\n  );\n};\n\nReactDOM.render(\n  <Auth0Provider onRedirectCallback={onRedirectCallback}>\n    <App />\n  </Auth0Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}